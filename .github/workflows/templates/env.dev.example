# Development environment template for local use and CI checks.
# Copy to .env and fill in real values.
# Do not commit secrets.


# Admin accounts (comma, space, semicolon, or JSON array)
ADMIN_EMAIL=


# LLM providers (`google` supports Google AI Studio Gemini API and Vertex AI Gemini; choose with `GOOGLE_GEMINI_TRANSPORT`)
# Supported canonical options (backend normalises some friendly aliases):
# - LLM_PROVIDER: google | anthropic | openai
# - LLM_MODEL_GOOGLE: gemini-3-flash-preview | gemini-3.1-pro-preview
# - GOOGLE_GEMINI_TRANSPORT: aistudio | vertex (required when using `LLM_PROVIDER=google`)
# - LLM_MODEL_ANTHROPIC: claude-sonnet-4-6 | claude-haiku-4-5
# - LLM_MODEL_OPENAI: gpt-5.2 | gpt-5-mini
# Google path: choose the transport explicitly with `GOOGLE_GEMINI_TRANSPORT`.
# - `aistudio`: use `GOOGLE_API_KEY` for Google AI Studio Gemini API
# - `vertex`: use the Vertex service account settings below
# Google Vertex location settings (examples here use London, United Kingdom: `europe-west2`)
LLM_PROVIDER=google
LLM_MODEL_GOOGLE=gemini-3-flash-preview
GOOGLE_GEMINI_TRANSPORT=aistudio
LLM_MODEL_ANTHROPIC=claude-haiku-4-5
LLM_MODEL_OPENAI=gpt-5-mini

ANTHROPIC_API_KEY=

OPENAI_API_KEY=

GOOGLE_API_KEY=
GOOGLE_APPLICATION_CREDENTIALS=/run/secrets/google/service-account.json
GOOGLE_APPLICATION_CREDENTIALS_HOST_PATH=./google-service-account.json
GOOGLE_CLOUD_PROJECT_ID=your-gcp-project-id
GOOGLE_VERTEX_GEMINI_LOCATION=europe-west2


# Embedding providers (default `cohere` uses `COHERE_API_KEY`)
# Supported canonical options (backend normalises some friendly aliases):
# - EMBEDDING_PROVIDER: cohere | vertex | voyage
# - EMBEDDING_MODEL_COHERE: embed-v4.0
# - EMBEDDING_MODEL_VERTEX: multimodalembedding@001
# - EMBEDDING_MODEL_VOYAGE: voyage-multimodal-3.5
# Google Vertex embedding location (examples here use London, United Kingdom: `europe-west2`)
EMBEDDING_PROVIDER=cohere
EMBEDDING_MODEL_COHERE=embed-v4.0
COHERE_API_KEY=

EMBEDDING_MODEL_VERTEX=multimodalembedding@001
GOOGLE_VERTEX_EMBEDDING_LOCATION=europe-west2

EMBEDDING_MODEL_VOYAGE=voyage-multimodal-3.5
VOYAGEAI_API_KEY=


# Chat and tutoring runtime
CORS_ORIGINS=["http://localhost:5173"]
BACKEND_RELOAD=false
LLM_MAX_CONTEXT_TOKENS=10000
LLM_MAX_USER_INPUT_TOKENS=6000
CONTEXT_COMPRESSION_THRESHOLD=0.8
USER_WEEKLY_WEIGHTED_TOKEN_LIMIT=80000
CHAT_ENABLE_GREETING_FILTER=false
CHAT_ENABLE_OFF_TOPIC_FILTER=false
CHAT_METADATA_ROUTE_MODE=auto
CHAT_SINGLE_PASS_HEADER_FAILURES_BEFORE_TWO_STEP_RECOVERY=1
CHAT_TWO_STEP_RECOVERY_TURNS_BEFORE_SINGLE_PASS_RETRY=2


# Rate limiting
RATE_LIMIT_USER_PER_MINUTE=5
RATE_LIMIT_GLOBAL_PER_MINUTE=300
MAX_WS_CONNECTIONS_PER_USER=3


# Uploads
UPLOAD_STORAGE_DIR=/tmp/ai_coding_tutor_uploads
UPLOAD_EXPIRY_HOURS=24
UPLOAD_MAX_IMAGES_PER_MESSAGE=3
UPLOAD_MAX_DOCUMENTS_PER_MESSAGE=2
UPLOAD_MAX_IMAGE_MB=5
UPLOAD_MAX_DOCUMENT_MB=2
UPLOAD_MAX_DOCUMENT_TOKENS=6000


# Notebooks
NOTEBOOK_STORAGE_DIR=/tmp/ai_coding_tutor_notebooks
NOTEBOOK_MAX_SIZE_MB=5
NOTEBOOK_MAX_PER_USER=20
NOTEBOOK_MAX_CONTEXT_TOKENS=4000


# Misc runtime values
IMAGE_TOKEN_ESTIMATE=512
NOTEBOOK_MAX_TITLE_LENGTH=120
SESSION_PREVIEW_MAX_CHARS=80


# Database
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=coding_tutor
POSTGRES_PORT=5432
DATABASE_URL=postgresql+asyncpg://postgres:postgres@db:5432/coding_tutor
SQLALCHEMY_ECHO=false


# JWT and cookies
JWT_SECRET_KEY=your-secret-key-change-in-production-use-long-random-string
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7
AUTH_COOKIE_SECURE=false
AUTH_COOKIE_SAMESITE=lax
